import{d as X,V as Y,W as $,X as G,G as H,r as u,M as J,Y as K,v as Z,w as x,b as v,c as f,f as s,t as i,z as b,I as m,e as c,g as C,Z as O,J as F,$ as y,a0 as A,a1 as B,a2 as Q,a3 as U,a4 as ee,a5 as se,K as ae,a6 as oe,a7 as te,_ as le}from"./index.89431de9.js";import{_ as ie}from"./index.52c0da96.js";import{_ as ne}from"./index.f2eb9d5e.js";import{s as ue,a as ce}from"./localApi.a1faa422.js";const I=t=>(oe("data-v-1604b074"),t=t(),te(),t),_e={class:"player"},re={key:0,class:"player_info"},de={class:"player_header"},pe={class:"player_title"},ve=["title"],fe={class:"player_cover"},me={class:"player_song_info"},ye={class:"player_title"},ge={class:"player_info_label"},he={class:"player_origin"},be=I(()=>s("span",{class:"player_info_label"},"\u6765\u6E90\uFF1A",-1)),Ie={class:"player_singer"},Ee=I(()=>s("span",{class:"player_info_label"},"\u6B4C\u624B\uFF1A",-1)),Se={class:"player_ablum"},Ce=I(()=>s("span",{class:"player_info_label"},"\u4E13\u8F91\uFF1A",-1)),Fe={key:0,class:"player_control"},we={key:1,class:"player_list"},De=I(()=>s("div",{class:"player_other"},null,-1)),ke=X({__name:"index",props:{id:null,t:null},setup(t){const o=t,w=Y(),{audio:P}=$(w),{setAudioInfo:M}=w,T=G(),{playinglistReplace:N}=T,V=H(),e=u(),_=u(),r=u(!1),g=u(!1),E=u(!1),D=u({left:0,top:0});J([()=>o.id,()=>o.t],()=>{_.value=void 0,e.value=void 0,k()},{immediate:!0});function j(){P.value&&e.value&&(M(e.value),N([e.value]))}async function k(){if(g.value=!1,o.t===y.bili){r.value=!0;let[a,n]=await ue(String(o.id));if(r.value=!1,!a&&n){let S=n.data.data,h=A(S,o.t);e.value=h[0],_.value=h}else g.value=!0,B({type:"error",message:a==null?void 0:a.message});return}r.value=!0;let[l,d]=o.t===y.cloud?await Q({ids:Number(o.id)}):await ce({id:Number(o.id)});if(r.value=!1,!l&&d){let a=d.data.data,n=A(a,o.t);e.value=n}else g.value=!0,B({type:"error",message:l==null?void 0:l.message})}function L(l){if(!e.value)return;const{pageX:d,pageY:a}=l;E.value=!0,D.value={left:d,top:a},V.popoutHoldData=e.value}function W(){E.value=!1}return(l,d)=>{const a=K,n=ne,S=U,h=ee,z=ie,q=se("lazy"),R=Z;return x((v(),f("div",_e,[e.value?(v(),f("div",re,[s("div",de,[s("div",pe,i(e.value.title),1),s("div",{class:"player_singer",title:e.value.singers.map(p=>p.name).join(" / ")},i(e.value.singers.map(p=>p.name).join(" / ")),9,ve)]),s("div",fe,[x((v(),f("img",{key:e.value.cover,alt:"\u6B4C\u66F2\u5C01\u9762"})),[[q,b(ae)(e.value.cover)]])]),s("div",me,[s("div",ye,i(e.value.title),1),s("span",ge,i(e.value.publishTime===0?"":new Date(e.value.publishTime).toLocaleDateString().split("/").join("-")),1),s("div",he,[be,m(" "+i(t.t===b(y).bili?"\u54D4\u54E9\u54D4\u54E9":t.t===b(y).cloud?"\u7F51\u6613\u4E91\u97F3\u4E50":t.t===b(y).local&&e.value.id?"just\u97F3\u4E50":"\u672A\u77E5"),1)]),s("div",Ie,[Ee,m(" "+i(e.value.singers.map(p=>p.name).join(" / ")),1)]),s("div",Se,[Ce,m(" "+i(e.value.album),1)]),_.value?F("",!0):(v(),f("div",Fe,[c(a,{class:"player_control_btn full",color:"#f56c6c",onClick:j},{default:C(()=>[m("\u64AD\u653E")]),_:1}),c(a,{class:"player_control_btn",color:"#f56c6c",plain:"",onClick:O(L,["stop"])},{default:C(()=>[m("\u6536\u85CF")]),_:1},8,["onClick"])]))])])):F("",!0),_.value?(v(),f("div",we,[c(n,{songs:_.value},null,8,["songs"])])):F("",!0),De,c(h,{show:E.value,position:D.value,onClose:W},{default:C(()=>[c(S)]),_:1},8,["show","position"]),c(z,{isError:g.value,style:{height:"100%"},requestFunc:k},null,8,["isError"])])),[[R,r.value]])}}});const Me=le(ke,[["__scopeId","data-v-1604b074"]]);export{Me as default};
