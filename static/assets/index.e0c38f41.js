import{as as Se,f as J,g as le,m as me,d as D,i as oe,at as re,j as Q,z as y,J as R,O as K,au as _e,o as z,c as V,n as he,p as O,q as Be,v as ge,av as G,aw as Oe,ax as Fe,h as U,I as ue,ay as Me,b as h,E as j,az as Re,aA as ze,aB as Ae,aC as W,aD as Ie,aE as Le,aF as ye,aG as De,aH as Ve,aI as qe,y as Ke,aJ as Ue,r as we,aj as je,k as We,aK as ce,aL as He,aM as ie,H as Ne,am as Je,M as se,N as Ee,W as H,x as Qe,aN as Ge,Q as Xe,a as de,w as ve,F as be,B as Ye,e as te,u as Ze,aO as et,$ as I,aP as tt,a2 as at,t as st,a7 as nt,_ as lt}from"./index.98887901.js";import{_ as ot,a as rt}from"./index.83f909f4.js";import{c as ut,s as ct,_ as it}from"./index.b42b25ef.js";const M=e=>Se(e),X=Symbol("tabsRootContextKey"),dt=J({tabs:{type:le(Array),default:()=>me([])}}),ke="ElTabBar",vt=D({name:ke}),bt=D({...vt,props:dt,setup(e,{expose:s}){const g=e,k=G(),n=oe(X);n||re(ke,"<el-tabs><el-tab-bar /></el-tabs>");const a=Q("tabs"),C=y(),f=y(),l=()=>{let v=0,o=0;const p=["top","bottom"].includes(n.props.tabPosition)?"width":"height",b=p==="width"?"x":"y";return g.tabs.every(m=>{var r,E,t,w;const d=(E=(r=k.parent)==null?void 0:r.refs)==null?void 0:E[`tab-${m.uid}`];if(!d)return!1;if(!m.active)return!0;o=d[`client${M(p)}`];const $=b==="x"?"left":"top";v=d[`offset${M($)}`]-((w=(t=d.parentElement)==null?void 0:t[`offset${M($)}`])!=null?w:0);const A=d.closest(".is-scrollable");if(A){const q=window.getComputedStyle(A);v+=Number.parseFloat(q[`padding${M($)}`])}const T=window.getComputedStyle(d);return p==="width"&&(g.tabs.length>1&&(o-=Number.parseFloat(T.paddingLeft)+Number.parseFloat(T.paddingRight)),v+=Number.parseFloat(T.paddingLeft)),!1}),{[p]:`${o}px`,transform:`translate${M(b)}(${v}px)`}},i=()=>f.value=l();return R(()=>g.tabs,async()=>{await K(),i()},{immediate:!0}),_e(C,()=>i()),s({ref:C,update:i}),(v,o)=>(z(),V("div",{ref_key:"barRef",ref:C,class:he([O(a).e("active-bar"),O(a).is(O(n).props.tabPosition)]),style:Be(f.value)},null,6))}});var ft=ge(bt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const pt=J({panes:{type:le(Array),default:()=>me([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),mt={tabClick:(e,s,g)=>g instanceof Event,tabRemove:(e,s)=>s instanceof Event},fe="ElTabNav",_t=D({name:fe,props:pt,emits:mt,setup(e,{expose:s,emit:g}){const k=G(),n=oe(X);n||re(fe,"<el-tabs><tab-nav /></el-tabs>");const a=Q("tabs"),C=Oe(),f=Fe(),l=y(),i=y(),v=y(),o=y(!1),p=y(0),b=y(!1),m=y(!0),r=U(()=>["top","bottom"].includes(n.props.tabPosition)?"width":"height"),E=U(()=>({transform:`translate${r.value==="width"?"X":"Y"}(-${p.value}px)`})),t=()=>{if(!l.value)return;const u=l.value[`offset${M(r.value)}`],_=p.value;if(!_)return;const c=_>u?_-u:0;p.value=c},w=()=>{if(!l.value||!i.value)return;const u=i.value[`offset${M(r.value)}`],_=l.value[`offset${M(r.value)}`],c=p.value;if(u-c<=_)return;const S=u-c>_*2?c+_:u-_;p.value=S},d=async()=>{const u=i.value;if(!o.value||!v.value||!l.value||!u)return;await K();const _=v.value.querySelector(".is-active");if(!_)return;const c=l.value,S=["top","bottom"].includes(n.props.tabPosition),x=_.getBoundingClientRect(),P=c.getBoundingClientRect(),F=S?u.offsetWidth-P.width:u.offsetHeight-P.height,B=p.value;let N=B;S?(x.left<P.left&&(N=B-(P.left-x.left)),x.right>P.right&&(N=B+x.right-P.right)):(x.top<P.top&&(N=B-(P.top-x.top)),x.bottom>P.bottom&&(N=B+(x.bottom-P.bottom))),N=Math.max(N,0),p.value=Math.min(N,F)},$=()=>{if(!i.value||!l.value)return;const u=i.value[`offset${M(r.value)}`],_=l.value[`offset${M(r.value)}`],c=p.value;if(_<u){const S=p.value;o.value=o.value||{},o.value.prev=S,o.value.next=S+_<u,u-S<_&&(p.value=u-_)}else o.value=!1,c>0&&(p.value=0)},A=u=>{const _=u.code,{up:c,down:S,left:x,right:P}=W;if(![c,S,x,P].includes(_))return;const F=Array.from(u.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),B=F.indexOf(u.target);let N;_===x||_===c?B===0?N=F.length-1:N=B-1:B<F.length-1?N=B+1:N=0,F[N].focus({preventScroll:!0}),F[N].click(),T()},T=()=>{m.value&&(b.value=!0)},q=()=>b.value=!1;return R(C,u=>{u==="hidden"?m.value=!1:u==="visible"&&setTimeout(()=>m.value=!0,50)}),R(f,u=>{u?setTimeout(()=>m.value=!0,50):m.value=!1}),_e(v,$),ue(()=>setTimeout(()=>d(),0)),Me(()=>$()),s({scrollToActiveTab:d,removeFocus:q}),R(()=>e.panes,()=>k.update(),{flush:"post"}),()=>{const u=o.value?[h("span",{class:[a.e("nav-prev"),a.is("disabled",!o.value.prev)],onClick:t},[h(j,null,{default:()=>[h(Re,null,null)]})]),h("span",{class:[a.e("nav-next"),a.is("disabled",!o.value.next)],onClick:w},[h(j,null,{default:()=>[h(ze,null,null)]})])]:null,_=e.panes.map((c,S)=>{var x,P,F,B;const N=c.uid,Y=c.props.disabled,Z=(P=(x=c.props.name)!=null?x:c.index)!=null?P:`${S}`,ee=!Y&&(c.isClosable||e.editable);c.index=`${S}`;const Pe=ee?h(j,{class:"is-icon-close",onClick:L=>g("tabRemove",c,L)},{default:()=>[h(Ae,null,null)]}):null,xe=((B=(F=c.slots).label)==null?void 0:B.call(F))||c.props.label,$e=!Y&&c.active?0:-1;return h("div",{ref:`tab-${N}`,class:[a.e("item"),a.is(n.props.tabPosition),a.is("active",c.active),a.is("disabled",Y),a.is("closable",ee),a.is("focus",b.value)],id:`tab-${Z}`,key:`tab-${N}`,"aria-controls":`pane-${Z}`,role:"tab","aria-selected":c.active,tabindex:$e,onFocus:()=>T(),onBlur:()=>q(),onClick:L=>{q(),g("tabClick",c,Z,L)},onKeydown:L=>{ee&&(L.code===W.delete||L.code===W.backspace)&&g("tabRemove",c,L)}},[xe,Pe])});return h("div",{ref:v,class:[a.e("nav-wrap"),a.is("scrollable",!!o.value),a.is(n.props.tabPosition)]},[u,h("div",{class:a.e("nav-scroll"),ref:l},[h("div",{class:[a.e("nav"),a.is(n.props.tabPosition),a.is("stretch",e.stretch&&["top","bottom"].includes(n.props.tabPosition))],ref:i,style:E.value,role:"tablist",onKeydown:A},[e.type?null:h(ft,{tabs:[...e.panes]},null),_])])])}}}),ht=e=>Ie(e.subTree).filter(g=>{var k;return Le(g)&&((k=g.type)==null?void 0:k.name)==="ElTabPane"&&!!g.component}),pe=(e,s)=>ht(e).map(n=>n.component.uid).map(n=>s[n]).filter(n=>!!n),gt=J({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:le(Function),default:()=>!0},stretch:Boolean}),ae=e=>je(e)||We(e),yt={[ye]:e=>ae(e),tabClick:(e,s)=>s instanceof Event,tabChange:e=>ae(e),edit:(e,s)=>["remove","add"].includes(s),tabRemove:e=>ae(e),tabAdd:()=>!0};var wt=D({name:"ElTabs",props:gt,emits:yt,setup(e,{emit:s,slots:g,expose:k}){var n,a;const C=G(),f=Q("tabs"),l=y(),i=De({}),v=Ve([]),o=y((a=(n=e.modelValue)!=null?n:e.activeName)!=null?a:"0"),p=t=>{o.value=t,s(ye,t),s("tabChange",t)},b=async t=>{var w,d,$;if(!(o.value===t||ce(t)))try{await((w=e.beforeLeave)==null?void 0:w.call(e,t,o.value))!==!1&&(p(t),($=(d=l.value)==null?void 0:d.removeFocus)==null||$.call(d))}catch{}},m=(t,w,d)=>{t.props.disabled||(b(w),s("tabClick",t,d))},r=(t,w)=>{t.props.disabled||ce(t.props.name)||(w.stopPropagation(),s("edit",t.props.name,"remove"),s("tabRemove",t.props.name))},E=()=>{s("edit",void 0,"add"),s("tabAdd")};return qe({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},U(()=>!!e.activeName)),R(()=>e.activeName,t=>b(t)),R(()=>e.modelValue,t=>b(t)),R(o,async()=>{var t;await K(),(t=l.value)==null||t.scrollToActiveTab()}),Ke(X,{props:e,currentName:o,registerPane:d=>{i[d.uid]=d,v.value=pe(C,i)},unregisterPane:d=>{delete i[d],v.value=pe(C,i)}}),k({currentName:o}),()=>{const t=e.editable||e.addable?h("span",{class:f.e("new-tab"),tabindex:"0",onClick:E,onKeydown:$=>{$.code===W.enter&&E()}},[h(j,{class:f.is("icon-plus")},{default:()=>[h(Ue,null,null)]})]):null,w=h("div",{class:[f.e("header"),f.is(e.tabPosition)]},[t,h(_t,{ref:l,currentName:o.value,editable:e.editable,type:e.type,panes:v.value,stretch:e.stretch,onTabClick:m,onTabRemove:r},null)]),d=h("div",{class:f.e("content")},[we(g,"default")]);return h("div",{class:[f.b(),f.m(e.tabPosition),{[f.m("card")]:e.type==="card",[f.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[w,d]:[d,w]])}}});const Nt=J({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),Et=["id","aria-hidden","aria-labelledby"],Ce="ElTabPane",kt=D({name:Ce}),Ct=D({...kt,props:Nt,setup(e){const s=e,g=G(),k=He(),n=oe(X);n||re(Ce,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const a=Q("tab-pane"),C=y(),f=U(()=>s.closable||n.props.closable),l=ie(()=>{var b;return n.currentName.value===((b=s.name)!=null?b:C.value)}),i=y(l.value),v=U(()=>{var b;return(b=s.name)!=null?b:C.value}),o=ie(()=>!s.lazy||i.value||l.value);R(l,b=>{b&&(i.value=!0)});const p=Ne({uid:g.uid,slots:k,props:s,paneName:v,active:l,index:C,isClosable:f});return ue(()=>{n.registerPane(p)}),Je(()=>{n.unregisterPane(p.uid)}),(b,m)=>O(o)?se((z(),V("div",{key:0,id:`pane-${O(v)}`,class:he(O(a).b()),role:"tabpanel","aria-hidden":!O(l),"aria-labelledby":`tab-${O(v)}`},[we(b.$slots,"default")],10,Et)),[[Ee,O(l)]]):H("v-if",!0)}});var Te=ge(Ct,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const Tt=Qe(wt,{TabPane:Te}),Pt=Ge(Te);const xt={class:"search"},$t={class:"search_type"},St={class:"search_type_item"},Bt={class:"search_result"};var ne=(e=>(e.bili="\u54D4\u54E9\u54D4\u54E9",e.local="just",e.cloud="\u7F51\u6613\u4E91\u97F3\u4E50",e))(ne||{});const Ot=D({__name:"index",props:{kw:null,t:null},setup(e){const s=e,g=Ze(),k=et(),n=y(),a=y(s.t),C=y(1),f=y(1),l=y(!0),i=y(!1),v=Ne([]);R(a,m=>{K(()=>o()),!(k.query.kw===s.kw&&k.query.t===m)&&g.push(nt(k.path,{kw:s.kw,t:m}))}),R(()=>s,m=>{a.value=I[m.t],f.value=1,l.value=!0,i.value=!1,v.length=0,b(!0)},{deep:!0,immediate:!0}),ue(()=>{K(()=>o())});function o(){if(!n.value)return;new IntersectionObserver(function(r){r[0].isIntersecting&&n.value&&!l.value&&n.value.loadFunc()},{rootMargin:"0px 0px 200px 0px"}).observe(n.value.loadMore)}function p(m){a.value=m,f.value=1,l.value=!0,i.value=!1}async function b(m=!1){i.value=!1;let r,E;switch(a.value){case I.bili:{[r,E]=await ct(s.kw);break}case I.local:{[r,E]=await ut({kw:s.kw,limit:f.value,t:C.value}),f.value+=1;break}case I.cloud:{[r,E]=await tt({kw:s.kw,limit:f.value,t:C.value}),f.value+=1;break}default:r=null,E=void 0}if(!r&&E){m&&(v.length=0),l.value=!1;let t=E.data;return v.push(...at(t.data,a.value)),t.data.length<1||v.length>=t.count?0:t.data.length}else if(r)return l.value=!1,r.response&&r.response.status>=500?(i.value=!0,-1):0;return-1}return(m,r)=>{const E=Pt,t=Tt,w=it,d=ot,$=rt,A=Xe;return z(),V("div",xt,[de("div",$t,[h(t,{class:"search_header",modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=T=>a.value=T),stretch:!0,onTabChange:r[1]||(r[1]=T=>p(T))},{default:ve(()=>[(z(!0),V(be,null,Ye(O(I),T=>(z(),V(be,null,[T!==O(I).local?(z(),te(E,{key:0,label:ne[T],name:T},{label:ve(()=>[de("div",St,st(ne[T]),1)]),_:2},1032,["label","name"])):H("",!0)],64))),256))]),_:1},8,["modelValue"])]),se((z(),V("div",Bt,[!l.value||!i.value?(z(),te(w,{key:0,songs:v,emptyText:a.value===O(I).bili?"\u8BF7\u8F93\u5165\u6B63\u786E\u7684bv\u53F7":"\u6CA1\u6709\u641C\u7D22\u5230\u76F8\u5173\u6B4C\u66F2"},null,8,["songs","emptyText"])):H("",!0)])),[[A,l.value&&!i.value]]),h(d,{isError:l.value&&i.value,requestFunc:()=>b(!0)},null,8,["isError","requestFunc"]),a.value!==O(I).bili?se((z(),te($,{key:a.value,ref_key:"loadMore",ref:n,requestFunc:b})),[[Ee,!l.value]]):H("",!0)])}}});const zt=lt(Ot,[["__scopeId","data-v-cebcb63a"]]);export{zt as default};
