import{f as ee,ah as te,k as U,ai as ae,g as se,d as M,j as oe,z as g,h as T,aj as le,ak as ne,J as L,o as s,c as u,q,p as f,e as x,w as b,s as ie,E as W,r as re,n as ce,v as ue,x as _e,a as t,H as de,I as pe,P as v,al as O,am as ve,an as fe,ao as me,ag as he,Q as ge,b as C,M as w,t as I,C as ye,F as Se,N as P,W as B,u as ke,ap as we,a2 as Ce,$ as A,aq as Ie,ar as Ee,Z as Pe,D as V,a0 as xe,a1 as $e,O as ze,_ as De}from"./index.98887901.js";import{_ as be,a as Te}from"./index.83f909f4.js";import{a as Be,b as Le,_ as Me}from"./index.b42b25ef.js";const Ne=ee({size:{type:[Number,String],values:te,default:"",validator:l=>U(l)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:ae},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:se(String),default:"cover"}}),Fe={error:l=>l instanceof Event},qe=["src","alt","srcset"],Oe=M({name:"ElAvatar"}),Ae=M({...Oe,props:Ne,emits:Fe,setup(l,{emit:o}){const y=l,r=oe("avatar"),S=g(!1),$=T(()=>{const{size:a,icon:h,shape:z}=y,d=[r.b()];return le(a)&&d.push(r.m(a)),h&&d.push(r.m("icon")),z&&d.push(r.m(z)),d}),_=T(()=>{const{size:a}=y;return U(a)?r.cssVarBlock({size:ne(a)||""}):void 0}),e=T(()=>({objectFit:y.fit}));L(()=>y.src,()=>S.value=!1);function m(a){S.value=!0,o("error",a)}return(a,h)=>(s(),u("span",{class:ce(f($)),style:q(f(_))},[(a.src||a.srcSet)&&!S.value?(s(),u("img",{key:0,src:a.src,alt:a.alt,srcset:a.srcSet,style:q(f(e)),onError:m},null,44,qe)):a.icon?(s(),x(f(W),{key:1},{default:b(()=>[(s(),x(ie(a.icon)))]),_:1})):re(a.$slots,"default",{key:2})],6))}});var Ve=ue(Ae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/avatar/src/avatar.vue"]]);const Ue=_e(Ve),We={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},je=t("path",{fill:"currentColor",d:"m192 384l320 384l320-384z"},null,-1),He=[je];function Je(l,o){return s(),u("svg",We,He)}const Qe={name:"ep-caret-bottom",render:Je},Re={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ze=t("path",{fill:"currentColor",d:"M512 320L192 704h639.936z"},null,-1),Ge=[Ze];function Ke(l,o){return s(),u("svg",Re,Ge)}const Xe={name:"ep-caret-top",render:Ke};const Ye={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},et=t("path",{fill:"currentColor",d:"M288 320a224 224 0 1 0 448 0a224 224 0 1 0-448 0zm544 608H160a32 32 0 0 1-32-32v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 0 1-32 32z"},null,-1),tt=[et];function at(l,o){return s(),u("svg",Ye,tt)}const st={name:"ep-user-filled",render:at},j=l=>(xe("data-v-7291618f"),l=l(),$e(),l),ot={class:"playlist"},lt={class:"playlist_wrapper"},nt={key:0,class:"playlist_info"},it={class:"playlist_info_left"},rt={class:"playlist_info_cover"},ct={class:"playlist_info_right"},ut={class:"playlist_info_right_line"},_t=["title"],dt={class:"playlist_info_right_line"},pt={class:"playlist_info_nickname"},vt={class:"playlist_info_createTime"},ft={class:"playlist_info_right_line"},mt={class:"playlise_info_playinfo"},ht=j(()=>t("span",{class:"playlist_info-tip"},"\u6B4C\u66F2:",-1)),gt={class:"playlist_info_right_line"},yt={class:"playlist_info_description"},St=j(()=>t("span",{class:"playlist_info-tip"},"\u7B80\u4ECB:",-1)),kt={key:0},wt={class:"playlist_song"},Ct=M({__name:"index",props:{id:null,t:null},setup(l){const o=l,y=ke(),r=g(!0),S=g(!1),$=g(!1),_=de([]),e=g(),m=g(!1),a=g(1),h=g();function z(){var i;if(!((i=h.value)!=null&&i.loadMore))return;new IntersectionObserver(function(c){c[0].isIntersecting&&h.value&&h.value.loadFunc()},{rootMargin:"0px 0px 400px 0px"}).observe(h.value.loadMore)}L([()=>o.id,()=>o.t],()=>{_.length=0,d()},{immediate:!0}),L(e,()=>{ze(()=>z())}),pe(()=>{o.t===v.localStorage&&window.addEventListener(O,d)}),ve(()=>{window.removeEventListener(O,d)});async function d(){if(o.t===v.localStorage){r.value=!0;let n=fe(Number(o.id));n?(e.value=n,_.length=0,_.push(...n.tracks)):y.replace("/404"),r.value=!1;return}H(Number(o.id),o.t)}async function H(n,i){r.value=!0,S.value=!1;let[c,p]=i===v.local?await Be({id:n}):await me({id:n});if(r.value=!1,!c&&p){let{code:k,data:D}=p.data;return e.value=he(D,i),!0}else return y.replace("/404"),S.value=!0,!1}async function J(n,i,c=!1){$.value=!1;let[p,k]=i===v.local?await Le({id:n,limit:a.value}):await we({id:n,limit:a.value});if(!p&&k){let{code:D,data:E}=k.data;return c||(_.length=0),_.push(...Ce(E,i===v.cloud?A.cloud:A.local)),a.value+=1,E.length}else return $.value=!0,-1}function Q(){m.value=!m.value}function R(n){if(!e.value||e.value.type!==v.localStorage)return;let i={...e.value};i.tracks=n;let c=Ie(),p=c.findIndex(k=>k.id===i.id);p!==-1&&(c.splice(p,1,i),Ee(c))}return(n,i)=>{var N,F;const c=be,p=st,k=Ue,D=Xe,E=W,Z=Qe,G=Me,K=Te,X=Pe("lazy"),Y=ge;return s(),u("div",ot,[C(c,{isError:!r.value&&S.value,requestFunc:d},null,8,["isError"]),w((s(),u("div",lt,[e.value?(s(),u("div",nt,[t("div",it,[t("div",rt,[w((s(),u("img",{alt:"\u6B4C\u5355\u5C01\u9762",key:e.value.cover})),[[X,f(V)(e.value.cover)]])])]),t("div",ct,[t("div",ut,[t("h3",{class:"playlist_info_title",title:e.value.title},I(e.value.title),9,_t)]),t("div",dt,[(s(),x(k,{class:"playlist_info_avatar",size:36,src:f(V)(e.value.creator.avatarUrl),key:e.value.creator.avatarUrl},{default:b(()=>[C(p)]),_:1},8,["src"])),t("span",pt,I(e.value.creator.name),1),t("span",vt,I(e.value.createTime===0?"":new Date(e.value.createTime).toLocaleDateString()),1)]),t("div",ft,[t("div",mt,[ht,ye(I(e.value.trackCount),1)])]),t("div",gt,[t("div",yt,[St,e.value.description===""?(s(),u("span",kt,"\u65E0")):(s(),u(Se,{key:1},[w(t("span",{class:"playlist_info_description-title"},I(e.value.description),513),[[P,!m.value]]),w(t("span",{class:"playlist_info_description-full"},I(e.value.description),513),[[P,m.value]]),t("span",{class:"playlist_info_description-arrow",onClick:Q},[w(C(E,null,{default:b(()=>[C(D)]),_:1},512),[[P,m.value]]),w(C(E,null,{default:b(()=>[C(Z)]),_:1},512),[[P,!m.value]])])],64))])])])])):B("",!0),w(t("div",wt,[_?(s(),x(G,{key:0,songs:_,canDeleteSong:((N=e.value)==null?void 0:N.type)===f(v).localStorage,canDrag:((F=e.value)==null?void 0:F.type)===f(v).localStorage,onSongOrder:R},null,8,["songs","canDeleteSong","canDrag"])):B("",!0),o.t!==f(v).localStorage&&e.value?(s(),x(K,{key:"loadingSong",ref_key:"loadMore",ref:h,requestFunc:J.bind(void 0,Number(o.id),o.t,!0)},null,8,["requestFunc"])):B("",!0)],512),[[P,e.value]])])),[[Y,r.value&&!e.value]])])}}});const xt=De(Ct,[["__scopeId","data-v-7291618f"]]);export{xt as default};
