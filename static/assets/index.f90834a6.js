import{d as T,r as d,ad as w,a as E,o as I,M,R as F,ae as N,af as q,P as $,b as r,c as m,f as p,w as h,e as f,Q as A,F as k,v as D,_ as b,l as H,t as L,z as g,H as O,x as C,u as R,y as V,U as z}from"./index.4dea08ff.js";import{_ as Q,a as S}from"./index.c5b50cd2.js";import{_ as j,a as U}from"./index.4ba2f0db.js";const G={class:"playlist"},J=T({__name:"index",props:{isTopList:{type:Boolean,default:!1,required:!1}},setup(t){const{isTopList:y}=t,e=d(),s=d(!1),a=d(!0),i=d(0),c=d(w.All),o=E([]);I(()=>{l()}),M(a,n=>{n||F(()=>v())});function v(){if(!e.value)return;new IntersectionObserver(function(_){_[0].isIntersecting&&e.value&&e.value.loadFunc()},{rootMargin:"0px 0px 200px 0px"}).observe(e.value.loadMore)}async function l(){s.value=!1;let[n,_]=await N({before:i.value,cat:c.value,limit:y?20:10});if(!n&&_){const{code:x,data:u}=_.data;return o.push(...q(u.playlist,$.cloud)),i.value=u.lasttime,a.value=!1,u.more?u.playlist.length:0}return n&&(s.value=!0),-1}return(n,_)=>{const x=j,u=Q,B=S,P=D;return r(),m(k,null,[p("div",G,[h(f(x,{isTopList:t.isTopList,playlist:o},null,8,["isTopList","playlist"]),[[P,a.value&&!s.value]]),f(u,{isError:a.value&&s.value,requestFunc:l},null,8,["isError"])]),h(f(B,{ref_key:"loadMore",ref:e,requestFunc:l},null,512),[[A,t.isTopList&&!a.value]])],64)}}});const K=b(J,[["__scopeId","data-v-516d48f7"]]),W={class:"playlist_wrapper"},X={class:"playlist_title"},Y={class:"playlist_title_tag-cur"},Z={class:"playlist_title_tag"},tt=["onClick"],et={key:2,class:"playlist_content-error"},st=T({__name:"index",props:{id:null},setup(t){const{id:y}=t,e=R(),s=[{id:1,title:"\u63A8\u8350\u6B4C\u5355"},{id:2,title:"\u7CBE\u54C1\u6B4C\u5355"}],a=H(()=>{var i,c;return(c=(i=s.find(o=>o.id===Number(y)))==null?void 0:i.title)!=null?c:""});return(i,c)=>{const o=U,v=K;return r(),m("div",W,[p("div",X,[p("div",Y,L(g(a)),1),p("ul",Z,[(r(),m(k,null,O(s,l=>p("li",{class:V(`playlist_title_tag-item ${l.id===Number(t.id)?"active":""}`),onClick:()=>g(e).replace(g(z)("/playlist",{id:l.id}))},L(l.title),11,tt)),64))])]),Number(t.id)===1?(r(),C(o,{key:0,isTopList:!0})):Number(t.id)===2?(r(),C(v,{key:1,isTopList:!0})):(r(),m("div",et," \u6CA1\u6709\u8FD9\u4E2A\u5206\u7C7B "))])}}});const ot=b(st,[["__scopeId","data-v-74568060"]]);export{ot as default};
