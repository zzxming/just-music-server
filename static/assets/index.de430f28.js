import{d as G,V as J,W as K,X as Z,G as O,r as c,M as Q,Y as U,v as ee,w as h,b as m,c as g,f as t,I as d,t as _,z as E,e as p,g as D,Z as te,J as j,$ as r,a0 as w,a1 as ae,a2 as L,a3 as se,a4 as oe,a5 as R,K as le,a6 as ie,a7 as ne,_ as ue}from"./index.4dea08ff.js";import{_ as ce}from"./index.c5b50cd2.js";import{_ as re}from"./index.b41ff838.js";import{g as de,a as _e,s as pe}from"./localApi.46af6a8e.js";import"./more-outlined.d60f6fa6.js";const I=u=>(ie("data-v-885d05fe"),u=u(),ne(),u),ve={class:"player"},fe={key:0,class:"player_info"},me={class:"player_header"},ge={class:"player_title"},ye=["title"],he={class:"player_cover"},be={class:"player_song_info"},Ee={class:"player_title"},Ie={class:"player_info_label"},Se={class:"player_origin"},Fe=I(()=>t("span",{class:"player_info_label"},"\u6765\u6E90\uFF1A",-1)),Ce={class:"player_singer"},De=I(()=>t("span",{class:"player_info_label"},"\u6B4C\u624B\uFF1A",-1)),we={class:"player_ablum"},xe=I(()=>t("span",{class:"player_info_label"},"\u4E13\u8F91\uFF1A",-1)),Ae={class:"player_control"},Be={key:1,class:"player_list"},Te=I(()=>t("div",{class:"player_other"},null,-1)),ke=G({__name:"index",props:{id:null,t:null},setup(u){const s=u,x=J(),{audio:W}=K(x),{setAudioInfo:A}=x,q=Z(),{playinglistReplace:B}=q,T=O(),e=c(),n=c(),y=c(!1),b=c(!1),S=c(!1),F=c(!1),C=c(!1),k=c({left:0,top:0});Q([()=>s.id,()=>s.t],()=>{n.value=void 0,e.value=void 0,P()},{immediate:!0});async function P(){if(b.value=!1,s.t===r.bili){y.value=!0;let[o,v]=await de(String(s.id));if(M(),y.value=!1,!o&&v){let i=v.data.data;e.value={type:r.bili,id:i.id,cid:0,title:i.title,cover:i.cover,singers:[{id:i.creator.userId,name:i.creator.name}],duration:0,album:i.title,publishTime:i.updateTime,fee:0,noCopyrightRcmd:null,st:0,full:!0}}else b.value=!0,w({type:"error",message:o==null?void 0:o.message});return}y.value=!0;let[a,l]=s.t===r.cloud?await ae({ids:Number(s.id)}):await _e({id:Number(s.id)});if(y.value=!1,!a&&l){let o=l.data.data,v=L(o,s.t);e.value=v}else b.value=!0,w({type:"error",message:a==null?void 0:a.message})}async function M(){n.value=[],F.value=!1,S.value=!0;let[a,l]=await pe(String(s.id));S.value=!1,!a&&l?n.value=L(l.data.data,s.t):(F.value=!0,w({type:"error",message:a==null?void 0:a.message}))}function z(a){if(!e.value)return;const{pageX:l,pageY:o}=a;C.value=!0,k.value={left:l,top:o},s.t===r.bili?T.popoutHoldData=n.value:T.popoutHoldData=e.value}function $(){W.value&&(s.t===r.bili&&n.value?(A(n.value[0]),B(n.value)):e.value&&(A(e.value),B([e.value])))}return(a,l)=>{const o=U,v=re,i=ce,H=se,X=oe,N=R("textRoll"),Y=R("lazy"),V=ee;return h((m(),g("div",ve,[e.value?(m(),g("div",fe,[t("div",me,[t("div",ge,[h((m(),g("span",null,[d(_(e.value.title),1)])),[[N]])]),t("div",{class:"player_singer",title:e.value.singers.map(f=>f.name).join(" / ")},[h((m(),g("span",null,[d(_(e.value.singers.map(f=>f.name).join(" / ")),1)])),[[N]])],8,ye)]),t("div",he,[h((m(),g("img",{key:e.value.cover,alt:"\u6B4C\u66F2\u5C01\u9762"})),[[Y,E(le)(e.value.cover)]])]),t("div",be,[t("div",Ee,_(e.value.title),1),t("span",Ie,_(e.value.publishTime===0?"":new Date(e.value.publishTime).toLocaleDateString().split("/").join("-")),1),t("div",Se,[Fe,d(" "+_(u.t===E(r).bili?"\u54D4\u54E9\u54D4\u54E9":u.t===E(r).cloud?"\u7F51\u6613\u4E91\u97F3\u4E50":u.t===E(r).local&&e.value.id?"just\u97F3\u4E50":"\u672A\u77E5"),1)]),t("div",Ce,[De,d(" "+_(e.value.singers.map(f=>f.name).join(" / ")),1)]),t("div",we,[xe,d(" "+_(e.value.album),1)]),t("div",Ae,[p(o,{class:"player_control_btn full",color:"#f56c6c",onClick:$},{default:D(()=>[d("\u64AD\u653E")]),_:1}),p(o,{class:"player_control_btn",color:"#f56c6c",plain:"",onClick:te(z,["stop"])},{default:D(()=>[d("\u6536\u85CF")]),_:1},8,["onClick"])])])])):j("",!0),n.value?h((m(),g("div",Be,[p(v,{songs:n.value},null,8,["songs"]),p(i,{isError:F.value,style:{height:"100px"},requestFunc:M},null,8,["isError"])])),[[V,S.value]]):j("",!0),Te,p(X,{show:C.value,position:k.value,onClose:l[0]||(l[0]=f=>C.value=!1)},{default:D(()=>[p(H)]),_:1},8,["show","position"]),p(i,{isError:b.value,style:{height:"100%"},requestFunc:P},null,8,["isError"])])),[[V,y.value]])}}});const Le=ue(ke,[["__scopeId","data-v-885d05fe"]]);export{Le as default};
