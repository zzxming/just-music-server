import{_ as ke}from"./index.141f7ffc.js";import{au as Se,i as H,j as ae,m as be,d as M,k as se,av as ne,p as W,r as w,M as F,R as le,aw as ve,b as V,c as U,y as fe,z as $,n as $e,B as me,ax as Q,ay as xe,az as Be,l as q,o as pe,aA as Re,e as f,E as K,aB as Fe,aC as Oe,aD as ze,aE as j,aF as Ae,aG as Me,aH as _e,aI as De,aJ as Le,aK as Ve,D as Ie,aL as Ue,h as he,aj as qe,q as Ke,aM as oe,aN as je,aO as re,a as ge,am as He,w as We,Q as Qe,J as ye,C as Je,aP as Ge,f as Z,g as ce,F as ue,H as Xe,u as Ye,aQ as Ze,$ as z,aR as et,a2 as tt,x as at,t as st,U as nt,_ as lt}from"./index.93b487f7.js";import{d as ot,s as rt}from"./localApi.ce7fb414.js";import"./index.6754e4d5.js";import"./more-outlined.22939d11.js";const R=e=>Se(e),J=Symbol("tabsRootContextKey"),ct=H({tabs:{type:ae(Array),default:()=>be([])}}),we="ElTabBar",ut=M({name:we}),it=M({...ut,props:ct,setup(e,{expose:s}){const p=e,C=Q(),a=se(J);a||ne(we,"<el-tabs><el-tab-bar /></el-tabs>");const o=W("tabs"),g=w(),m=w(),r=()=>{let _=0,c=0;const l=["top","bottom"].includes(a.props.tabPosition)?"width":"height",n=l==="width"?"x":"y";return p.tabs.every(h=>{var y,O,t,P;const b=(O=(y=C.parent)==null?void 0:y.refs)==null?void 0:O[`tab-${h.uid}`];if(!b)return!1;if(!h.active)return!0;c=b[`client${R(l)}`];const x=n==="x"?"left":"top";_=b[`offset${R(x)}`]-((P=(t=b.parentElement)==null?void 0:t[`offset${R(x)}`])!=null?P:0);const D=b.closest(".is-scrollable");if(D){const I=window.getComputedStyle(D);_+=Number.parseFloat(I[`padding${R(x)}`])}const L=window.getComputedStyle(b);return l==="width"&&(p.tabs.length>1&&(c-=Number.parseFloat(L.paddingLeft)+Number.parseFloat(L.paddingRight)),_+=Number.parseFloat(L.paddingLeft)),!1}),{[l]:`${c}px`,transform:`translate${R(n)}(${_}px)`}},d=()=>m.value=r();return F(()=>p.tabs,async()=>{await le(),d()},{immediate:!0}),ve(g,()=>d()),s({ref:g,update:d}),(_,c)=>(V(),U("div",{ref_key:"barRef",ref:g,class:fe([$(o).e("active-bar"),$(o).is($(a).props.tabPosition)]),style:$e(m.value)},null,6))}});var dt=me(it,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const bt=H({panes:{type:ae(Array),default:()=>be([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),vt={tabClick:(e,s,p)=>p instanceof Event,tabRemove:(e,s)=>s instanceof Event},ie="ElTabNav",ft=M({name:ie,props:bt,emits:vt,setup(e,{expose:s,emit:p}){const C=Q(),a=se(J);a||ne(ie,"<el-tabs><tab-nav /></el-tabs>");const o=W("tabs"),g=xe(),m=Be(),r=w(),d=w(),_=w(),c=w(!1),l=w(0),n=w(!1),h=w(!0),y=q(()=>["top","bottom"].includes(a.props.tabPosition)?"width":"height"),O=q(()=>({transform:`translate${y.value==="width"?"X":"Y"}(-${l.value}px)`})),t=()=>{if(!r.value)return;const u=r.value[`offset${R(y.value)}`],v=l.value;if(!v)return;const i=v>u?v-u:0;l.value=i},P=()=>{if(!r.value||!d.value)return;const u=d.value[`offset${R(y.value)}`],v=r.value[`offset${R(y.value)}`],i=l.value;if(u-i<=v)return;const k=u-i>v*2?i+v:u-v;l.value=k},b=async()=>{const u=d.value;if(!c.value||!_.value||!r.value||!u)return;await le();const v=_.value.querySelector(".is-active");if(!v)return;const i=r.value,k=["top","bottom"].includes(a.props.tabPosition),E=v.getBoundingClientRect(),T=i.getBoundingClientRect(),B=k?u.offsetWidth-T.width:u.offsetHeight-T.height,S=l.value;let N=S;k?(E.left<T.left&&(N=S-(T.left-E.left)),E.right>T.right&&(N=S+E.right-T.right)):(E.top<T.top&&(N=S-(T.top-E.top)),E.bottom>T.bottom&&(N=S+(E.bottom-T.bottom))),N=Math.max(N,0),l.value=Math.min(N,B)},x=()=>{if(!d.value||!r.value)return;const u=d.value[`offset${R(y.value)}`],v=r.value[`offset${R(y.value)}`],i=l.value;if(v<u){const k=l.value;c.value=c.value||{},c.value.prev=k,c.value.next=k+v<u,u-k<v&&(l.value=u-v)}else c.value=!1,i>0&&(l.value=0)},D=u=>{const v=u.code,{up:i,down:k,left:E,right:T}=j;if(![i,k,E,T].includes(v))return;const B=Array.from(u.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),S=B.indexOf(u.target);let N;v===E||v===i?S===0?N=B.length-1:N=S-1:S<B.length-1?N=S+1:N=0,B[N].focus({preventScroll:!0}),B[N].click(),L()},L=()=>{h.value&&(n.value=!0)},I=()=>n.value=!1;return F(g,u=>{u==="hidden"?h.value=!1:u==="visible"&&setTimeout(()=>h.value=!0,50)}),F(m,u=>{u?setTimeout(()=>h.value=!0,50):h.value=!1}),ve(_,x),pe(()=>setTimeout(()=>b(),0)),Re(()=>x()),s({scrollToActiveTab:b,removeFocus:I}),F(()=>e.panes,()=>C.update(),{flush:"post"}),()=>{const u=c.value?[f("span",{class:[o.e("nav-prev"),o.is("disabled",!c.value.prev)],onClick:t},[f(K,null,{default:()=>[f(Fe,null,null)]})]),f("span",{class:[o.e("nav-next"),o.is("disabled",!c.value.next)],onClick:P},[f(K,null,{default:()=>[f(Oe,null,null)]})])]:null,v=e.panes.map((i,k)=>{var E,T,B,S;const N=i.uid,G=i.props.disabled,X=(T=(E=i.props.name)!=null?E:i.index)!=null?T:`${k}`,Y=!G&&(i.isClosable||e.editable);i.index=`${k}`;const Pe=Y?f(K,{class:"is-icon-close",onClick:A=>p("tabRemove",i,A)},{default:()=>[f(ze,null,null)]}):null,Te=((S=(B=i.slots).label)==null?void 0:S.call(B))||i.props.label,Ee=!G&&i.active?0:-1;return f("div",{ref:`tab-${N}`,class:[o.e("item"),o.is(a.props.tabPosition),o.is("active",i.active),o.is("disabled",G),o.is("closable",Y),o.is("focus",n.value)],id:`tab-${X}`,key:`tab-${N}`,"aria-controls":`pane-${X}`,role:"tab","aria-selected":i.active,tabindex:Ee,onFocus:()=>L(),onBlur:()=>I(),onClick:A=>{I(),p("tabClick",i,X,A)},onKeydown:A=>{Y&&(A.code===j.delete||A.code===j.backspace)&&p("tabRemove",i,A)}},[Te,Pe])});return f("div",{ref:_,class:[o.e("nav-wrap"),o.is("scrollable",!!c.value),o.is(a.props.tabPosition)]},[u,f("div",{class:o.e("nav-scroll"),ref:r},[f("div",{class:[o.e("nav"),o.is(a.props.tabPosition),o.is("stretch",e.stretch&&["top","bottom"].includes(a.props.tabPosition))],ref:d,style:O.value,role:"tablist",onKeydown:D},[e.type?null:f(dt,{tabs:[...e.panes]},null),v])])])}}}),mt=e=>Ae(e.subTree).filter(p=>{var C;return Me(p)&&((C=p.type)==null?void 0:C.name)==="ElTabPane"&&!!p.component}),de=(e,s)=>mt(e).map(a=>a.component.uid).map(a=>s[a]).filter(a=>!!a),pt=H({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:ae(Function),default:()=>!0},stretch:Boolean}),ee=e=>qe(e)||Ke(e),_t={[_e]:e=>ee(e),tabClick:(e,s)=>s instanceof Event,tabChange:e=>ee(e),edit:(e,s)=>["remove","add"].includes(s),tabRemove:e=>ee(e),tabAdd:()=>!0};var ht=M({name:"ElTabs",props:pt,emits:_t,setup(e,{emit:s,slots:p,expose:C}){var a,o;const g=Q(),m=W("tabs"),r=w(),d=De({}),_=Le([]),c=w((o=(a=e.modelValue)!=null?a:e.activeName)!=null?o:"0"),l=t=>{c.value=t,s(_e,t),s("tabChange",t)},n=async t=>{var P,b,x;if(!(c.value===t||oe(t)))try{await((P=e.beforeLeave)==null?void 0:P.call(e,t,c.value))!==!1&&(l(t),(x=(b=r.value)==null?void 0:b.removeFocus)==null||x.call(b))}catch{}},h=(t,P,b)=>{t.props.disabled||(n(P),s("tabClick",t,b))},y=(t,P)=>{t.props.disabled||oe(t.props.name)||(P.stopPropagation(),s("edit",t.props.name,"remove"),s("tabRemove",t.props.name))},O=()=>{s("edit",void 0,"add"),s("tabAdd")};return Ve({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},q(()=>!!e.activeName)),F(()=>e.activeName,t=>n(t)),F(()=>e.modelValue,t=>n(t)),F(c,async()=>{var t;await le(),(t=r.value)==null||t.scrollToActiveTab()}),Ie(J,{props:e,currentName:c,registerPane:b=>{d[b.uid]=b,_.value=de(g,d)},unregisterPane:b=>{delete d[b],_.value=de(g,d)}}),C({currentName:c}),()=>{const t=e.editable||e.addable?f("span",{class:m.e("new-tab"),tabindex:"0",onClick:O,onKeydown:x=>{x.code===j.enter&&O()}},[f(K,{class:m.is("icon-plus")},{default:()=>[f(Ue,null,null)]})]):null,P=f("div",{class:[m.e("header"),m.is(e.tabPosition)]},[t,f(ft,{ref:r,currentName:c.value,editable:e.editable,type:e.type,panes:_.value,stretch:e.stretch,onTabClick:h,onTabRemove:y},null)]),b=f("div",{class:m.e("content")},[he(p,"default")]);return f("div",{class:[m.b(),m.m(e.tabPosition),{[m.m("card")]:e.type==="card",[m.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[P,b]:[b,P]])}}});const gt=H({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),yt=["id","aria-hidden","aria-labelledby"],Ne="ElTabPane",wt=M({name:Ne}),Nt=M({...wt,props:gt,setup(e){const s=e,p=Q(),C=je(),a=se(J);a||ne(Ne,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const o=W("tab-pane"),g=w(),m=q(()=>s.closable||a.props.closable),r=re(()=>{var n;return a.currentName.value===((n=s.name)!=null?n:g.value)}),d=w(r.value),_=q(()=>{var n;return(n=s.name)!=null?n:g.value}),c=re(()=>!s.lazy||d.value||r.value);F(r,n=>{n&&(d.value=!0)});const l=ge({uid:p.uid,slots:C,props:s,paneName:_,active:r,index:g,isClosable:m});return pe(()=>{a.registerPane(l)}),He(()=>{a.unregisterPane(l.uid)}),(n,h)=>$(c)?We((V(),U("div",{key:0,id:`pane-${$(_)}`,class:fe($(o).b()),role:"tabpanel","aria-hidden":!$(r),"aria-labelledby":`tab-${$(_)}`},[he(n.$slots,"default")],10,yt)),[[Qe,$(r)]]):ye("v-if",!0)}});var Ce=me(Nt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const Ct=Je(ht,{TabPane:Ce}),Pt=Ge(Ce);const Tt={class:"search"},Et={class:"search_type"},kt={class:"search_type_item"},St={class:"search_result"};var te=(e=>(e.bili="\u54D4\u54E9\u54D4\u54E9",e.local="just",e.cloud="\u7F51\u6613\u4E91\u97F3\u4E50",e))(te||{});const $t=M({__name:"index",props:{kw:null,t:null},setup(e){const s=e,p=Ye(),C=Ze(),a=w(s.t),o=w(1),g=w(1),m=w(!0),r=w(!1),d=ge([]);F(a,l=>{C.query.kw===s.kw&&C.query.t===l||p.push(nt(C.path,{kw:s.kw,t:l}))}),F(()=>s,l=>{a.value=z[l.t],g.value=1,m.value=!0,r.value=!1,d.length=0},{deep:!0,immediate:!0});function _(l){a.value=l,g.value=1,m.value=!0,r.value=!1}async function c(l=!1){r.value=!1;let n,h;switch(a.value){case z.bili:{[n,h]=await rt(s.kw);break}case z.local:{[n,h]=await ot({kw:s.kw,limit:g.value,t:o.value});break}case z.cloud:{[n,h]=await et({kw:s.kw,limit:g.value,t:o.value});break}default:n=null,h=void 0}if(!n&&h){l&&(d.length=0),m.value=!1;let y=h.data;return g.value+=1,d.push(...tt(y.data,a.value)),y.data.length<1||d.length>=y.count?0:y.data.length}else if(n)return m.value=!1,n.response&&n.response.status>=500?(r.value=!0,-1):0;return-1}return(l,n)=>{const h=Pt,y=Ct,O=ke;return V(),U("div",Tt,[Z("div",Et,[f(y,{class:"search_header",modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=t=>a.value=t),stretch:!0,onTabChange:n[1]||(n[1]=t=>_(t))},{default:ce(()=>[(V(!0),U(ue,null,Xe($(z),t=>(V(),U(ue,null,[t!==$(z).local?(V(),at(h,{key:0,label:te[t],name:t},{label:ce(()=>[Z("div",kt,st(te[t]),1)]),_:2},1032,["label","name"])):ye("",!0)],64))),256))]),_:1},8,["modelValue"])]),Z("div",St,[f(O,{songs:d,emptyText:a.value===$(z).bili?"\u8BF7\u8F93\u5165\u6B63\u786E\u7684bv\u53F7":"\u6CA1\u6709\u641C\u7D22\u5230\u76F8\u5173\u6B4C\u66F2",isStatic:a.value===$(z).bili,loadMoreFunc:c},null,8,["songs","emptyText","isStatic"])])])}}});const zt=lt($t,[["__scopeId","data-v-c3cb60cb"]]);export{zt as default};
