import{a5 as h,a6 as y,a7 as D,d as H,a8 as Q,R as X,T as G,A as K,S as U,a9 as Z,z as P,J as q,o as c,c as r,a as i,p as d,W as f,F as v,B as L,n as tt,t as u,aa as st,b as T,C as w,ab as et,$ as at,ac as ot,ad as it,a0 as nt,a1 as lt,_ as ct}from"./index.98887901.js";const Vt=async o=>await h(y.get(D("/bili/info",{bv:o}))),Mt=async o=>(o.limit||(o.limit=1),o.t||(o.t=1),await h(y.get(D("/music/search/local",o)))),Ot=async o=>await h(y.get(D("/music/local/info",o))),Rt=async o=>await h(y.get(D("/music/local/playlist/detail",o))),Yt=async o=>await h(y.get(D("/music/local/playlist/track",o))),I=o=>(nt("data-v-ee812ed5"),o=o(),lt(),o),rt={class:"songlist"},dt={class:"songlist_header"},ut=I(()=>i("div",{class:"songlist_index"},null,-1)),_t=I(()=>i("div",{class:"songlist_title"},"\u6807\u9898",-1)),pt={key:0,class:"songlist_singer"},gt=I(()=>i("div",{class:"songlist_duration"},"\u65F6\u95F4",-1)),mt={class:"songlist_body"},ft=["draggable","onDblclick","onContextmenu","onDragstart","onDrop"],vt={class:"songlist_index"},ht={class:"songlist_index-text"},yt={class:"el-icon songlist_index-icon playing"},Dt={class:"songlist_title"},xt={class:"songlist_title-title"},St=["title"],bt={key:0,class:"el-icon songlist_title-icon"},Lt=["title"],It={class:"songlist_singer"},Ct={class:"songlist_singer_item"},At=["title"],kt={class:"songlist_singer"},Pt={class:"songlist_singer_item"},Tt={class:"songlist_duration"},wt={class:"songlist_duration"},Bt={key:0,class:"songlist_empty"},Ft=H({__name:"index",props:{songs:null,emptyText:{default:"\u8FD9\u91CC\u4EC0\u4E48\u90FD\u6CA1\u6709"},canDeleteSong:{type:Boolean,default:!1},canDrag:{type:Boolean,default:!1}},emits:["songOrder"],setup(o,{emit:B}){const _=o,b=Q(),C=X(),F=G(),N=K(),{audioInfo:p}=U(C),{setAudioInfo:V}=C,{playinglistReplace:M}=F,{setPopoutState:O}=N,{songs:x,emptyText:R}=Z(_),S=P(p.value.id),A=P(p.value.cid);q(p,a=>{S.value=a.id,A.value=a.cid});async function Y(a,s){(p.value.id!==s.id||p.value.type===at.bili&&p.value.cid!==s.cid)&&(S.value=s.id,S.value=s.cid,V(s),M(x.value))}function $(a,s){a.preventDefault(),O({popoutVisible:!0,popoutPosition:{left:a.pageX,top:a.pageY},popoutHoldData:s,popoutIsMusic:!0,popoutCanDelete:_.canDeleteSong})}function j(a,s){var l;!_.canDrag||(l=a.dataTransfer)==null||l.setData("data",JSON.stringify(s))}function E(a){!_.canDrag||a.target&&(a.target.classList.remove("top"),a.target.classList.remove("bottom"))}function J(a){if(!_.canDrag)return;a.preventDefault();let s=a.composedPath().find(n=>Array.from(n.classList).includes("songlist_item")),l=s.offsetHeight,g=s.offsetTop;a.pageY<g+l/2?(s.classList.add("top"),s.classList.remove("bottom")):(s.classList.remove("top"),s.classList.add("bottom"))}function W(a,s){var k;if(!_.canDrag)return;let l=a.composedPath().find(z=>Array.from(z.classList).includes("songlist_item")),g=Array.from(l.classList),e=JSON.parse((k=a.dataTransfer)==null?void 0:k.getData("data")),n=s;if(g.includes("bottom")&&(n+=1),n<0&&(n=0),n===e){l.classList.remove("top"),l.classList.remove("bottom");return}let t=[...x.value],m=t[e];t.splice(n,0,m),n<e?t.splice(e+1,1):t.splice(e,1),B("songOrder",t),l.classList.remove("top"),l.classList.remove("bottom")}return(a,s)=>{const l=ot,g=it;return c(),r("div",rt,[i("div",dt,[ut,_t,d(b)?f("",!0):(c(),r("div",pt,"\u6B4C\u624B")),gt]),i("div",mt,[(c(!0),r(v,null,L(d(x),(e,n)=>(c(),r("div",{class:tt(`songlist_item ${n%2===0?"stripe":""} ${S.value===e.id&&A.value===e.cid?"active":""} ${e.st===-200?"disable":""}`),draggable:o.canDrag,onDblclick:t=>Y(t,e),onContextmenu:t=>$(t,e),onDragstart:t=>j(t,n),onDragleave:s[0]||(s[0]=t=>E(t)),onDragover:s[1]||(s[1]=t=>J(t)),onDrop:t=>W(t,n)},[i("div",vt,[i("span",ht,u(d(st)(n+1)),1),i("span",yt,[T(l)])]),i("div",Dt,[i("div",xt,[i("span",{class:"songlist_title-text",title:e.title},u(e.title),9,St),e.fee===1?(c(),r("span",bt,[T(g)])):f("",!0)]),d(b)?(c(),r("div",{key:0,class:"songlist_title-singer",title:e.singers.map(t=>t.name).join(" / ")},[i("span",It,[(c(!0),r(v,null,L(e.singers,(t,m)=>(c(),r(v,null,[i("span",Ct,u(t.name),1),w(" "+u(m===e.singers.length-1?"":"\xA0/\xA0"),1)],64))),256))])],8,Lt)):f("",!0)]),d(b)?f("",!0):(c(),r("div",{key:0,class:"songlist_singer",title:e.singers.map(t=>t.name).join(" / ")},[i("span",kt,[(c(!0),r(v,null,L(e.singers,(t,m)=>(c(),r(v,null,[i("span",Pt,u(t.name),1),w(" "+u(m===e.singers.length-1?"":"\xA0/\xA0"),1)],64))),256))])],8,At)),i("div",Tt,[i("span",wt,u(d(et)(e.duration/1e3)),1)])],42,ft))),256)),d(x).length<1?(c(),r("div",Bt,u(d(R)),1)):f("",!0)])])}}});const $t=ct(Ft,[["__scopeId","data-v-ee812ed5"]]);export{$t as _,Rt as a,Yt as b,Mt as c,Ot as g,Vt as s};
