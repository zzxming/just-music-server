import{_ as Se}from"./index.b41ff838.js";import{at as $e,i as H,j as ae,m as be,d as D,k as se,au as ne,p as W,r as w,M as O,R as le,av as fe,b as M,c as U,y as me,z as $,n as xe,B as pe,aw as Q,ax as Be,ay as Fe,l as q,o as _e,az as Oe,e as m,E as K,aA as Re,aB as ze,aC as Ae,aD as j,aE as Me,aF as De,aG as he,aH as Le,aI as Ve,aJ as Ie,D as Ue,aK as qe,h as ge,ai as Ke,q as je,aL as oe,aM as He,aN as re,a as ye,al as We,w as Qe,Q as Je,J as we,C as Ge,aO as Xe,f as Z,g as ue,F as ie,H as Ye,x as ce,u as Ze,aP as et,$ as z,aQ as tt,a2 as at,t as st,U as nt,_ as lt}from"./index.4dea08ff.js";import{d as ot,s as rt}from"./localApi.46af6a8e.js";import"./index.c5b50cd2.js";import"./more-outlined.d60f6fa6.js";const F=e=>$e(e),J=Symbol("tabsRootContextKey"),ut=H({tabs:{type:ae(Array),default:()=>be([])}}),Ne="ElTabBar",it=D({name:Ne}),ct=D({...it,props:ut,setup(e,{expose:s}){const p=e,C=Q(),a=se(J);a||ne(Ne,"<el-tabs><el-tab-bar /></el-tabs>");const o=W("tabs"),g=w(),f=w(),r=()=>{let _=0,u=0;const l=["top","bottom"].includes(a.props.tabPosition)?"width":"height",n=l==="width"?"x":"y";return p.tabs.every(h=>{var y,R,t,P;const v=(R=(y=C.parent)==null?void 0:y.refs)==null?void 0:R[`tab-${h.uid}`];if(!v)return!1;if(!h.active)return!0;u=v[`client${F(l)}`];const x=n==="x"?"left":"top";_=v[`offset${F(x)}`]-((P=(t=v.parentElement)==null?void 0:t[`offset${F(x)}`])!=null?P:0);const L=v.closest(".is-scrollable");if(L){const I=window.getComputedStyle(L);_+=Number.parseFloat(I[`padding${F(x)}`])}const V=window.getComputedStyle(v);return l==="width"&&(p.tabs.length>1&&(u-=Number.parseFloat(V.paddingLeft)+Number.parseFloat(V.paddingRight)),_+=Number.parseFloat(V.paddingLeft)),!1}),{[l]:`${u}px`,transform:`translate${F(n)}(${_}px)`}},d=()=>f.value=r();return O(()=>p.tabs,async()=>{await le(),d()},{immediate:!0}),fe(g,()=>d()),s({ref:g,update:d}),(_,u)=>(M(),U("div",{ref_key:"barRef",ref:g,class:me([$(o).e("active-bar"),$(o).is($(a).props.tabPosition)]),style:xe(f.value)},null,6))}});var dt=pe(ct,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const vt=H({panes:{type:ae(Array),default:()=>be([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),bt={tabClick:(e,s,p)=>p instanceof Event,tabRemove:(e,s)=>s instanceof Event},de="ElTabNav",ft=D({name:de,props:vt,emits:bt,setup(e,{expose:s,emit:p}){const C=Q(),a=se(J);a||ne(de,"<el-tabs><tab-nav /></el-tabs>");const o=W("tabs"),g=Be(),f=Fe(),r=w(),d=w(),_=w(),u=w(!1),l=w(0),n=w(!1),h=w(!0),y=q(()=>["top","bottom"].includes(a.props.tabPosition)?"width":"height"),R=q(()=>({transform:`translate${y.value==="width"?"X":"Y"}(-${l.value}px)`})),t=()=>{if(!r.value)return;const i=r.value[`offset${F(y.value)}`],b=l.value;if(!b)return;const c=b>i?b-i:0;l.value=c},P=()=>{if(!r.value||!d.value)return;const i=d.value[`offset${F(y.value)}`],b=r.value[`offset${F(y.value)}`],c=l.value;if(i-c<=b)return;const E=i-c>b*2?c+b:i-b;l.value=E},v=async()=>{const i=d.value;if(!u.value||!_.value||!r.value||!i)return;await le();const b=_.value.querySelector(".is-active");if(!b)return;const c=r.value,E=["top","bottom"].includes(a.props.tabPosition),k=b.getBoundingClientRect(),T=c.getBoundingClientRect(),B=E?i.offsetWidth-T.width:i.offsetHeight-T.height,S=l.value;let N=S;E?(k.left<T.left&&(N=S-(T.left-k.left)),k.right>T.right&&(N=S+k.right-T.right)):(k.top<T.top&&(N=S-(T.top-k.top)),k.bottom>T.bottom&&(N=S+(k.bottom-T.bottom))),N=Math.max(N,0),l.value=Math.min(N,B)},x=()=>{if(!d.value||!r.value)return;const i=d.value[`offset${F(y.value)}`],b=r.value[`offset${F(y.value)}`],c=l.value;if(b<i){const E=l.value;u.value=u.value||{},u.value.prev=E,u.value.next=E+b<i,i-E<b&&(l.value=i-b)}else u.value=!1,c>0&&(l.value=0)},L=i=>{const b=i.code,{up:c,down:E,left:k,right:T}=j;if(![c,E,k,T].includes(b))return;const B=Array.from(i.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),S=B.indexOf(i.target);let N;b===k||b===c?S===0?N=B.length-1:N=S-1:S<B.length-1?N=S+1:N=0,B[N].focus({preventScroll:!0}),B[N].click(),V()},V=()=>{h.value&&(n.value=!0)},I=()=>n.value=!1;return O(g,i=>{i==="hidden"?h.value=!1:i==="visible"&&setTimeout(()=>h.value=!0,50)}),O(f,i=>{i?setTimeout(()=>h.value=!0,50):h.value=!1}),fe(_,x),_e(()=>setTimeout(()=>v(),0)),Oe(()=>x()),s({scrollToActiveTab:v,removeFocus:I}),O(()=>e.panes,()=>C.update(),{flush:"post"}),()=>{const i=u.value?[m("span",{class:[o.e("nav-prev"),o.is("disabled",!u.value.prev)],onClick:t},[m(K,null,{default:()=>[m(Re,null,null)]})]),m("span",{class:[o.e("nav-next"),o.is("disabled",!u.value.next)],onClick:P},[m(K,null,{default:()=>[m(ze,null,null)]})])]:null,b=e.panes.map((c,E)=>{var k,T,B,S;const N=c.uid,G=c.props.disabled,X=(T=(k=c.props.name)!=null?k:c.index)!=null?T:`${E}`,Y=!G&&(c.isClosable||e.editable);c.index=`${E}`;const Te=Y?m(K,{class:"is-icon-close",onClick:A=>p("tabRemove",c,A)},{default:()=>[m(Ae,null,null)]}):null,ke=((S=(B=c.slots).label)==null?void 0:S.call(B))||c.props.label,Ee=!G&&c.active?0:-1;return m("div",{ref:`tab-${N}`,class:[o.e("item"),o.is(a.props.tabPosition),o.is("active",c.active),o.is("disabled",G),o.is("closable",Y),o.is("focus",n.value)],id:`tab-${X}`,key:`tab-${N}`,"aria-controls":`pane-${X}`,role:"tab","aria-selected":c.active,tabindex:Ee,onFocus:()=>V(),onBlur:()=>I(),onClick:A=>{I(),p("tabClick",c,X,A)},onKeydown:A=>{Y&&(A.code===j.delete||A.code===j.backspace)&&p("tabRemove",c,A)}},[ke,Te])});return m("div",{ref:_,class:[o.e("nav-wrap"),o.is("scrollable",!!u.value),o.is(a.props.tabPosition)]},[i,m("div",{class:o.e("nav-scroll"),ref:r},[m("div",{class:[o.e("nav"),o.is(a.props.tabPosition),o.is("stretch",e.stretch&&["top","bottom"].includes(a.props.tabPosition))],ref:d,style:R.value,role:"tablist",onKeydown:L},[e.type?null:m(dt,{tabs:[...e.panes]},null),b])])])}}}),mt=e=>Me(e.subTree).filter(p=>{var C;return De(p)&&((C=p.type)==null?void 0:C.name)==="ElTabPane"&&!!p.component}),ve=(e,s)=>mt(e).map(a=>a.component.uid).map(a=>s[a]).filter(a=>!!a),pt=H({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:ae(Function),default:()=>!0},stretch:Boolean}),ee=e=>Ke(e)||je(e),_t={[he]:e=>ee(e),tabClick:(e,s)=>s instanceof Event,tabChange:e=>ee(e),edit:(e,s)=>["remove","add"].includes(s),tabRemove:e=>ee(e),tabAdd:()=>!0};var ht=D({name:"ElTabs",props:pt,emits:_t,setup(e,{emit:s,slots:p,expose:C}){var a,o;const g=Q(),f=W("tabs"),r=w(),d=Le({}),_=Ve([]),u=w((o=(a=e.modelValue)!=null?a:e.activeName)!=null?o:"0"),l=t=>{u.value=t,s(he,t),s("tabChange",t)},n=async t=>{var P,v,x;if(!(u.value===t||oe(t)))try{await((P=e.beforeLeave)==null?void 0:P.call(e,t,u.value))!==!1&&(l(t),(x=(v=r.value)==null?void 0:v.removeFocus)==null||x.call(v))}catch{}},h=(t,P,v)=>{t.props.disabled||(n(P),s("tabClick",t,v))},y=(t,P)=>{t.props.disabled||oe(t.props.name)||(P.stopPropagation(),s("edit",t.props.name,"remove"),s("tabRemove",t.props.name))},R=()=>{s("edit",void 0,"add"),s("tabAdd")};return Ie({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},q(()=>!!e.activeName)),O(()=>e.activeName,t=>n(t)),O(()=>e.modelValue,t=>n(t)),O(u,async()=>{var t;await le(),(t=r.value)==null||t.scrollToActiveTab()}),Ue(J,{props:e,currentName:u,registerPane:v=>{d[v.uid]=v,_.value=ve(g,d)},unregisterPane:v=>{delete d[v],_.value=ve(g,d)}}),C({currentName:u}),()=>{const t=e.editable||e.addable?m("span",{class:f.e("new-tab"),tabindex:"0",onClick:R,onKeydown:x=>{x.code===j.enter&&R()}},[m(K,{class:f.is("icon-plus")},{default:()=>[m(qe,null,null)]})]):null,P=m("div",{class:[f.e("header"),f.is(e.tabPosition)]},[t,m(ft,{ref:r,currentName:u.value,editable:e.editable,type:e.type,panes:_.value,stretch:e.stretch,onTabClick:h,onTabRemove:y},null)]),v=m("div",{class:f.e("content")},[ge(p,"default")]);return m("div",{class:[f.b(),f.m(e.tabPosition),{[f.m("card")]:e.type==="card",[f.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[P,v]:[v,P]])}}});const gt=H({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),yt=["id","aria-hidden","aria-labelledby"],Ce="ElTabPane",wt=D({name:Ce}),Nt=D({...wt,props:gt,setup(e){const s=e,p=Q(),C=He(),a=se(J);a||ne(Ce,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const o=W("tab-pane"),g=w(),f=q(()=>s.closable||a.props.closable),r=re(()=>{var n;return a.currentName.value===((n=s.name)!=null?n:g.value)}),d=w(r.value),_=q(()=>{var n;return(n=s.name)!=null?n:g.value}),u=re(()=>!s.lazy||d.value||r.value);O(r,n=>{n&&(d.value=!0)});const l=ye({uid:p.uid,slots:C,props:s,paneName:_,active:r,index:g,isClosable:f});return _e(()=>{a.registerPane(l)}),We(()=>{a.unregisterPane(l.uid)}),(n,h)=>$(u)?Qe((M(),U("div",{key:0,id:`pane-${$(_)}`,class:me($(o).b()),role:"tabpanel","aria-hidden":!$(r),"aria-labelledby":`tab-${$(_)}`},[ge(n.$slots,"default")],10,yt)),[[Je,$(r)]]):we("v-if",!0)}});var Pe=pe(Nt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const Ct=Ge(ht,{TabPane:Pe}),Pt=Xe(Pe);const Tt={class:"search"},kt={class:"search_type"},Et={class:"search_type_item"},St={class:"search_result"};var te=(e=>(e.bili="\u54D4\u54E9\u54D4\u54E9",e.local="just",e.cloud="\u7F51\u6613\u4E91\u97F3\u4E50",e))(te||{});const $t=D({__name:"index",props:{kw:null,t:null},setup(e){const s=e,p=Ze(),C=et(),a=w(s.t),o=w(1),g=w(1),f=w(!0),r=w(!1),d=ye([]);O(a,l=>{C.query.kw===s.kw&&C.query.t===l||p.push(nt(C.path,{kw:s.kw,t:l}))}),O(()=>s,l=>{a.value=z[l.t],g.value=1,f.value=!0,r.value=!1,d.length=0},{deep:!0,immediate:!0});function _(l){a.value=l,g.value=1,f.value=!0,r.value=!1}async function u(l=!1){r.value=!1;let n,h;switch(a.value){case z.bili:{[n,h]=await rt(s.kw);break}case z.local:{[n,h]=await ot({kw:s.kw,limit:g.value,t:o.value});break}case z.cloud:{[n,h]=await tt({kw:s.kw,limit:g.value,t:o.value});break}default:n=null,h=void 0}if(!n&&h){l&&(d.length=0),f.value=!1;let y=h.data;return g.value+=1,d.push(...at(y.data,a.value)),y.data.length<1||d.length>=y.count?0:y.data.length}else if(n)return f.value=!1,n.response&&n.response.status>=500?(r.value=!0,-1):0;return-1}return(l,n)=>{const h=Pt,y=Ct,R=Se;return M(),U("div",Tt,[Z("div",kt,[m(y,{class:"search_header",modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=t=>a.value=t),stretch:!0,onTabChange:n[1]||(n[1]=t=>_(t))},{default:ue(()=>[(M(!0),U(ie,null,Ye($(z),t=>(M(),U(ie,null,[t!==$(z).local?(M(),ce(h,{key:0,label:te[t],name:t},{label:ue(()=>[Z("div",Et,st(te[t]),1)]),_:2},1032,["label","name"])):we("",!0)],64))),256))]),_:1},8,["modelValue"])]),Z("div",St,[(M(),ce(R,{key:a.value,songs:d,emptyText:a.value===$(z).bili?"\u8BF7\u8F93\u5165\u6B63\u786E\u7684bv\u53F7":"\u6CA1\u6709\u641C\u7D22\u5230\u76F8\u5173\u6B4C\u66F2",isStatic:a.value===$(z).bili,loadMoreFunc:u},null,8,["songs","emptyText","isStatic"]))])])}}});const zt=lt($t,[["__scopeId","data-v-615488ec"]]);export{zt as default};
