import{_ as ke}from"./index.f2eb9d5e.js";import{as as xe,i as W,j as se,m as be,d as A,k as ne,at as le,p as J,r as y,M as R,R as q,au as fe,b as L,c as U,y as pe,z as $,n as Se,B as me,av as Q,aw as $e,ax as Be,l as K,o as oe,ay as Oe,e as h,E as j,az as Fe,aA as Re,aB as Me,aC as H,aD as ze,aE as Ae,aF as _e,aG as Ie,aH as De,aI as Le,D as Ve,aJ as Ue,h as he,aj as qe,q as Ke,aK as re,aL as je,aM as ue,a as ge,am as He,w as We,Q as Je,J as ye,C as Qe,aN as Ge,f as ee,g as ie,F as ce,H as Xe,u as Ye,aO as Ze,$ as M,aP as et,a0 as tt,x as at,t as st,U as nt,_ as lt}from"./index.89431de9.js";import{d as ot,s as rt}from"./localApi.a1faa422.js";import"./index.52c0da96.js";const F=e=>xe(e),G=Symbol("tabsRootContextKey"),ut=W({tabs:{type:se(Array),default:()=>be([])}}),we="ElTabBar",it=A({name:we}),ct=A({...it,props:ut,setup(e,{expose:a}){const g=e,P=Q(),l=ne(G);l||le(we,"<el-tabs><el-tab-bar /></el-tabs>");const s=J("tabs"),T=y(),f=y(),o=()=>{let d=0,r=0;const b=["top","bottom"].includes(l.props.tabPosition)?"width":"height",p=b==="width"?"x":"y";return g.tabs.every(m=>{var u,C,t,w;const n=(C=(u=P.parent)==null?void 0:u.refs)==null?void 0:C[`tab-${m.uid}`];if(!n)return!1;if(!m.active)return!0;r=n[`client${F(b)}`];const B=p==="x"?"left":"top";d=n[`offset${F(B)}`]-((w=(t=n.parentElement)==null?void 0:t[`offset${F(B)}`])!=null?w:0);const I=n.closest(".is-scrollable");if(I){const V=window.getComputedStyle(I);d+=Number.parseFloat(V[`padding${F(B)}`])}const D=window.getComputedStyle(n);return b==="width"&&(g.tabs.length>1&&(r-=Number.parseFloat(D.paddingLeft)+Number.parseFloat(D.paddingRight)),d+=Number.parseFloat(D.paddingLeft)),!1}),{[b]:`${r}px`,transform:`translate${F(p)}(${d}px)`}},v=()=>f.value=o();return R(()=>g.tabs,async()=>{await q(),v()},{immediate:!0}),fe(T,()=>v()),a({ref:T,update:v}),(d,r)=>(L(),U("div",{ref_key:"barRef",ref:T,class:pe([$(s).e("active-bar"),$(s).is($(l).props.tabPosition)]),style:Se(f.value)},null,6))}});var dt=me(ct,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const vt=W({panes:{type:se(Array),default:()=>be([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),bt={tabClick:(e,a,g)=>g instanceof Event,tabRemove:(e,a)=>a instanceof Event},de="ElTabNav",ft=A({name:de,props:vt,emits:bt,setup(e,{expose:a,emit:g}){const P=Q(),l=ne(G);l||le(de,"<el-tabs><tab-nav /></el-tabs>");const s=J("tabs"),T=$e(),f=Be(),o=y(),v=y(),d=y(),r=y(!1),b=y(0),p=y(!1),m=y(!0),u=K(()=>["top","bottom"].includes(l.props.tabPosition)?"width":"height"),C=K(()=>({transform:`translate${u.value==="width"?"X":"Y"}(-${b.value}px)`})),t=()=>{if(!o.value)return;const i=o.value[`offset${F(u.value)}`],_=b.value;if(!_)return;const c=_>i?_-i:0;b.value=c},w=()=>{if(!o.value||!v.value)return;const i=v.value[`offset${F(u.value)}`],_=o.value[`offset${F(u.value)}`],c=b.value;if(i-c<=_)return;const x=i-c>_*2?c+_:i-_;b.value=x},n=async()=>{const i=v.value;if(!r.value||!d.value||!o.value||!i)return;await q();const _=d.value.querySelector(".is-active");if(!_)return;const c=o.value,x=["top","bottom"].includes(l.props.tabPosition),k=_.getBoundingClientRect(),E=c.getBoundingClientRect(),O=x?i.offsetWidth-E.width:i.offsetHeight-E.height,S=b.value;let N=S;x?(k.left<E.left&&(N=S-(E.left-k.left)),k.right>E.right&&(N=S+k.right-E.right)):(k.top<E.top&&(N=S-(E.top-k.top)),k.bottom>E.bottom&&(N=S+(k.bottom-E.bottom))),N=Math.max(N,0),b.value=Math.min(N,O)},B=()=>{if(!v.value||!o.value)return;const i=v.value[`offset${F(u.value)}`],_=o.value[`offset${F(u.value)}`],c=b.value;if(_<i){const x=b.value;r.value=r.value||{},r.value.prev=x,r.value.next=x+_<i,i-x<_&&(b.value=i-_)}else r.value=!1,c>0&&(b.value=0)},I=i=>{const _=i.code,{up:c,down:x,left:k,right:E}=H;if(![c,x,k,E].includes(_))return;const O=Array.from(i.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),S=O.indexOf(i.target);let N;_===k||_===c?S===0?N=O.length-1:N=S-1:S<O.length-1?N=S+1:N=0,O[N].focus({preventScroll:!0}),O[N].click(),D()},D=()=>{m.value&&(p.value=!0)},V=()=>p.value=!1;return R(T,i=>{i==="hidden"?m.value=!1:i==="visible"&&setTimeout(()=>m.value=!0,50)}),R(f,i=>{i?setTimeout(()=>m.value=!0,50):m.value=!1}),fe(d,B),oe(()=>setTimeout(()=>n(),0)),Oe(()=>B()),a({scrollToActiveTab:n,removeFocus:V}),R(()=>e.panes,()=>P.update(),{flush:"post"}),()=>{const i=r.value?[h("span",{class:[s.e("nav-prev"),s.is("disabled",!r.value.prev)],onClick:t},[h(j,null,{default:()=>[h(Fe,null,null)]})]),h("span",{class:[s.e("nav-next"),s.is("disabled",!r.value.next)],onClick:w},[h(j,null,{default:()=>[h(Re,null,null)]})])]:null,_=e.panes.map((c,x)=>{var k,E,O,S;const N=c.uid,X=c.props.disabled,Y=(E=(k=c.props.name)!=null?k:c.index)!=null?E:`${x}`,Z=!X&&(c.isClosable||e.editable);c.index=`${x}`;const Pe=Z?h(j,{class:"is-icon-close",onClick:z=>g("tabRemove",c,z)},{default:()=>[h(Me,null,null)]}):null,Te=((S=(O=c.slots).label)==null?void 0:S.call(O))||c.props.label,Ee=!X&&c.active?0:-1;return h("div",{ref:`tab-${N}`,class:[s.e("item"),s.is(l.props.tabPosition),s.is("active",c.active),s.is("disabled",X),s.is("closable",Z),s.is("focus",p.value)],id:`tab-${Y}`,key:`tab-${N}`,"aria-controls":`pane-${Y}`,role:"tab","aria-selected":c.active,tabindex:Ee,onFocus:()=>D(),onBlur:()=>V(),onClick:z=>{V(),g("tabClick",c,Y,z)},onKeydown:z=>{Z&&(z.code===H.delete||z.code===H.backspace)&&g("tabRemove",c,z)}},[Te,Pe])});return h("div",{ref:d,class:[s.e("nav-wrap"),s.is("scrollable",!!r.value),s.is(l.props.tabPosition)]},[i,h("div",{class:s.e("nav-scroll"),ref:o},[h("div",{class:[s.e("nav"),s.is(l.props.tabPosition),s.is("stretch",e.stretch&&["top","bottom"].includes(l.props.tabPosition))],ref:v,style:C.value,role:"tablist",onKeydown:I},[e.type?null:h(dt,{tabs:[...e.panes]},null),_])])])}}}),pt=e=>ze(e.subTree).filter(g=>{var P;return Ae(g)&&((P=g.type)==null?void 0:P.name)==="ElTabPane"&&!!g.component}),ve=(e,a)=>pt(e).map(l=>l.component.uid).map(l=>a[l]).filter(l=>!!l),mt=W({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:se(Function),default:()=>!0},stretch:Boolean}),te=e=>qe(e)||Ke(e),_t={[_e]:e=>te(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>te(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>te(e),tabAdd:()=>!0};var ht=A({name:"ElTabs",props:mt,emits:_t,setup(e,{emit:a,slots:g,expose:P}){var l,s;const T=Q(),f=J("tabs"),o=y(),v=Ie({}),d=De([]),r=y((s=(l=e.modelValue)!=null?l:e.activeName)!=null?s:"0"),b=t=>{r.value=t,a(_e,t),a("tabChange",t)},p=async t=>{var w,n,B;if(!(r.value===t||re(t)))try{await((w=e.beforeLeave)==null?void 0:w.call(e,t,r.value))!==!1&&(b(t),(B=(n=o.value)==null?void 0:n.removeFocus)==null||B.call(n))}catch{}},m=(t,w,n)=>{t.props.disabled||(p(w),a("tabClick",t,n))},u=(t,w)=>{t.props.disabled||re(t.props.name)||(w.stopPropagation(),a("edit",t.props.name,"remove"),a("tabRemove",t.props.name))},C=()=>{a("edit",void 0,"add"),a("tabAdd")};return Le({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},K(()=>!!e.activeName)),R(()=>e.activeName,t=>p(t)),R(()=>e.modelValue,t=>p(t)),R(r,async()=>{var t;await q(),(t=o.value)==null||t.scrollToActiveTab()}),Ve(G,{props:e,currentName:r,registerPane:n=>{v[n.uid]=n,d.value=ve(T,v)},unregisterPane:n=>{delete v[n],d.value=ve(T,v)}}),P({currentName:r}),()=>{const t=e.editable||e.addable?h("span",{class:f.e("new-tab"),tabindex:"0",onClick:C,onKeydown:B=>{B.code===H.enter&&C()}},[h(j,{class:f.is("icon-plus")},{default:()=>[h(Ue,null,null)]})]):null,w=h("div",{class:[f.e("header"),f.is(e.tabPosition)]},[t,h(ft,{ref:o,currentName:r.value,editable:e.editable,type:e.type,panes:d.value,stretch:e.stretch,onTabClick:m,onTabRemove:u},null)]),n=h("div",{class:f.e("content")},[he(g,"default")]);return h("div",{class:[f.b(),f.m(e.tabPosition),{[f.m("card")]:e.type==="card",[f.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[w,n]:[n,w]])}}});const gt=W({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),yt=["id","aria-hidden","aria-labelledby"],Ne="ElTabPane",wt=A({name:Ne}),Nt=A({...wt,props:gt,setup(e){const a=e,g=Q(),P=je(),l=ne(G);l||le(Ne,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=J("tab-pane"),T=y(),f=K(()=>a.closable||l.props.closable),o=ue(()=>{var p;return l.currentName.value===((p=a.name)!=null?p:T.value)}),v=y(o.value),d=K(()=>{var p;return(p=a.name)!=null?p:T.value}),r=ue(()=>!a.lazy||v.value||o.value);R(o,p=>{p&&(v.value=!0)});const b=ge({uid:g.uid,slots:P,props:a,paneName:d,active:o,index:T,isClosable:f});return oe(()=>{l.registerPane(b)}),He(()=>{l.unregisterPane(b.uid)}),(p,m)=>$(r)?We((L(),U("div",{key:0,id:`pane-${$(d)}`,class:pe($(s).b()),role:"tabpanel","aria-hidden":!$(o),"aria-labelledby":`tab-${$(d)}`},[he(p.$slots,"default")],10,yt)),[[Je,$(o)]]):ye("v-if",!0)}});var Ce=me(Nt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const Ct=Qe(ht,{TabPane:Ce}),Pt=Ge(Ce);const Tt={class:"search"},Et={class:"search_type"},kt={class:"search_type_item"},xt={class:"search_result"};var ae=(e=>(e.bili="\u54D4\u54E9\u54D4\u54E9",e.local="just",e.cloud="\u7F51\u6613\u4E91\u97F3\u4E50",e))(ae||{});const St=A({__name:"index",props:{kw:null,t:null},setup(e){const a=e,g=Ye(),P=Ze(),l=y(),s=y(a.t),T=y(1),f=y(1),o=y(!0),v=y(!1),d=ge([]);R(s,m=>{q(()=>r()),!(P.query.kw===a.kw&&P.query.t===m)&&g.push(nt(P.path,{kw:a.kw,t:m}))}),R(()=>a,m=>{s.value=M[m.t],f.value=1,o.value=!0,v.value=!1,d.length=0},{deep:!0,immediate:!0}),oe(()=>{q(()=>r())});function r(){if(!l.value)return;new IntersectionObserver(function(u){u[0].isIntersecting&&l.value&&!o.value&&l.value.loadFunc()},{rootMargin:"0px 0px 200px 0px"}).observe(l.value.loadMore)}function b(m){s.value=m,f.value=1,o.value=!0,v.value=!1}async function p(m=!1){v.value=!1;let u,C;switch(s.value){case M.bili:{[u,C]=await rt(a.kw);break}case M.local:{[u,C]=await ot({kw:a.kw,limit:f.value,t:T.value});break}case M.cloud:{[u,C]=await et({kw:a.kw,limit:f.value,t:T.value});break}default:u=null,C=void 0}if(!u&&C){m&&(d.length=0),o.value=!1;let t=C.data;return f.value+=1,d.push(...tt(t.data,s.value)),t.data.length<1||d.length>=t.count?0:t.data.length}else if(u)return o.value=!1,u.response&&u.response.status>=500?(v.value=!0,-1):0;return-1}return(m,u)=>{const C=Pt,t=Ct,w=ke;return L(),U("div",Tt,[ee("div",Et,[h(t,{class:"search_header",modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=n=>s.value=n),stretch:!0,onTabChange:u[1]||(u[1]=n=>b(n))},{default:ie(()=>[(L(!0),U(ce,null,Xe($(M),n=>(L(),U(ce,null,[n!==$(M).local?(L(),at(C,{key:0,label:ae[n],name:n},{label:ie(()=>[ee("div",kt,st(ae[n]),1)]),_:2},1032,["label","name"])):ye("",!0)],64))),256))]),_:1},8,["modelValue"])]),ee("div",xt,[h(w,{songs:d,emptyText:s.value===$(M).bili?"\u8BF7\u8F93\u5165\u6B63\u786E\u7684bv\u53F7":"\u6CA1\u6709\u641C\u7D22\u5230\u76F8\u5173\u6B4C\u66F2",isStatic:s.value===$(M).bili,loadMoreFunc:p},null,8,["songs","emptyText","isStatic"])])])}}});const Rt=lt(St,[["__scopeId","data-v-61d6223b"]]);export{Rt as default};
